{% extends "base.html" %}
{% block header %}Crash Impact Analysis{% endblock %}

{% block content %}
<div class="page-content">
    <h2>üèÜ Crash Impact Analysis</h2>
    <p>This chart shows how many crashes fall into each severity type.</p>

    <!-- FLEX CONTAINER: Bar and Pie side-by-side -->
    <div class="flex-charts">
        <!-- Bar Chart: Crash Type -->
        <div class="chart-container" style="width: 100%; max-width: 700px;">
            <canvas id="impactChart"></canvas>
        </div>

        <!-- Pie Chart: Injury Severity -->
        <div class="chart-container" style="width: 100%; max-width: 600px;">
            <canvas id="injuryChart"></canvas>
        </div>
    </div>

    <hr style="margin: 40px 0;">

    <h3>‚è∞ Crash Frequency by Hour of Day</h3>
    <p>Understand when most crashes occur during the day (0‚Äì23 hours).</p>

    <!-- Full Width Line Chart -->
    <div class="chart-container" style="width: 100%; max-width: 1000px; margin: auto;">
        <canvas id="hourChart"></canvas>
    </div>
</div>

<!-- Chart.js library -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Pass data from Flask -->
<script>
    const labels = {{ labels | tojson }};
    const values = {{ values | tojson }};
    const hour_labels = {{ hour_labels | tojson }};
    const hour_counts = {{ hour_counts | tojson }};
    const injury_labels = {{ injury_labels | tojson }};
    const injury_values = {{ injury_values | tojson }};
</script>

<!-- Chart logic -->
<script src="{{ url_for('static', filename='js/impact_charts.js') }}"></script>


{% endblock %}
