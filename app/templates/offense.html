{% extends "base.html" %} {% block content %}
<div class="container">
    <h1>Offense Type Analysis</h1>

    <!-- Filters -->
    <div class="filters">
        <label for="beat-select">Beat:</label>
        <select id="beat-select">
            <option value="all">All Beats</option>
            {% for b in beats %}
            <option value="{{ b }}">{{ b }}</option>
            {% endfor %}
        </select>
    </div>

    <!-- Chart Card -->
    <div class="card">
        <h2>Top Crash Causes</h2>
        <canvas id="cause-chart"></canvas>
    </div>
</div>
{% endblock %} {% block scripts %}
<script>
    // Pass Python data into JS
    const causeLabels = {{ labels|tojson }};
    const causeValues = {{ values|tojson }};

    // Render Chart.js bar chart
    new Chart(document.getElementById('cause-chart'), {
      type: 'bar',
      data: {
        labels: causeLabels,
        datasets: [{
          label: 'Crash Count',
          data: causeValues,
          backgroundColor: 'rgba(52, 152, 219, 0.7)'
        }]
      },
      options: {
        indexAxis: 'y',
        scales: {
          x: { title: { display: true, text: 'Count' } },
          y: { title: { display: true, text: 'Cause' } }
        },
        responsive: true
      }
    });
</script>
{% endblock %}
