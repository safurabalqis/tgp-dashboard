{% extends "base.html" %}

{% block content %}
<!-- Statistics Cards -->
<div class="row mb-4">
    <div class="col-md-2">
        <div class="stat-card">
            <div class="stat-icon">üåç</div>
            <div class="stat-content">
                <h3>{{ data.countries }}</h3>
                <p>Total Countries</p>
            </div>
        </div>
    </div>
    <div class="col-md-2">
        <div class="stat-card">
            <div class="stat-icon">üéØ</div>
            <div class="stat-content">
                <h3>{{ data.disciplines }}</h3>
                <p>Total Disciplines</p>
            </div>
        </div>
    </div>
    <div class="col-md-2">
        <div class="stat-card">
            <div class="stat-icon">üìÖ</div>
            <div class="stat-content">
                <h3>{{ data.events }}</h3>
                <p>Total Events</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stat-card">
            <div class="stat-icon">‚≠ê</div>
            <div class="stat-content">
                <h3>{{ data.medallists }}</h3>
                <p>Total Medallists</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stat-card">
            <div class="stat-icon">üèÉ</div>
            <div class="stat-content">
                <h3>{{ data.athletes }}</h3>
                <p>Total Athletes</p>
            </div>
        </div>
    </div>
</div>

<!-- Filter Section -->
<div class="row mb-4">
    <div class="col-md-6">
        <div class="filter-section">
            <label for="countryFilter" class="form-label">Filter by Country</label>
            <select class="form-select" id="countryFilter">
                <option value="">All Countries</option>
                {% for country in data.medals_by_country %}
                <option value="{{ country.country }}">{{ country.country }}</option>
                {% endfor %}
            </select>
        </div>
    </div>
</div>

<!-- Chart Section -->
<div class="row">
    <div class="col-12">
        <div class="chart-container">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h4>Top 10 Medals Breakdown by Country</h4>
                <button class="btn btn-outline-secondary btn-sm">‚ÜïÔ∏è</button>
            </div>
            <canvas id="medalsChart" width="800" height="400"></canvas>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// Chart.js implementation
document.addEventListener('DOMContentLoaded', function() {
    const ctx = document.getElementById('medalsChart').getContext('2d');
    const chartData = {{ data.medals_by_country | tojson }};
    
    const countries = chartData.map(item => item.country);
    const goldMedals = chartData.map(item => item.gold);
    const silverMedals = chartData.map(item => item.silver);
    const bronzeMedals = chartData.map(item => item.bronze);
    
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: countries,
            datasets: [
                {
                    label: 'Gold',
                    data: goldMedals,
                    backgroundColor: '#FFD700',
                    borderColor: '#FFD700',
                    borderWidth: 1
                },
                {
                    label: 'Silver',
                    data: silverMedals,
                    backgroundColor: '#C0C0C0',
                    borderColor: '#C0C0C0',
                    borderWidth: 1
                },
                {
                    label: 'Bronze',
                    data: bronzeMedals,
                    backgroundColor: '#CD7F32',
                    borderColor: '#CD7F32',
                    borderWidth: 1
                }
            ]
        },
        options: {
            responsive: true,
            scales: {
                x: {
                    stacked: true
                },
                y: {
                    stacked: true,
                    beginAtZero: true
                }
            },
            plugins: {
                legend: {
                    position: 'top'
                },
                title: {
                    display: false
                }
            }
        }
    });
});
</script>
{% endblock %}